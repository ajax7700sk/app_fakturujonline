{"version":3,"sources":["main.js"],"names":["document","addEventListener","event","bootstrap","taxDocument","datagrid","$","body","on","target","attr","$target","hasClass","removeClass","addClass","toolbar","parent","find","addItem","template","html","index","length","replace","append","recalculateLineItemsTotals","each","item","$tr","quantity","parseFloat","val","unitPriceTaxExcl","taxRate","isNaN","unitPriceTaxIncl","totalPriceTaxExcl","totalPriceTaxIncl","recalculateTotals","e","$btn","parents","remove"],"mappings":";;AAAA;;;;;;AAOA;AACA;AAEAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,UAACC,KAAD,EAAW;AACrD;AACAC,EAAAA,SAAS,GAF4C,CAGrD;;AACAC,EAAAA,WAAW;AACd,CALD;AAOA;;;;AAGA,SAASD,SAAT,GAAqB;AACjB,WAASE,QAAT,GAAoB;AAChB;AACAC,IAAAA,CAAC,CAACN,QAAQ,CAACO,IAAV,CAAD,CAAiBC,EAAjB,CAAoB,OAApB,EAA6B,0BAA7B,EAAyD,YAAW;AAChE,UAAMC,MAAM,GAAGH,CAAC,CAAC,IAAD,CAAD,CAAQI,IAAR,CAAa,aAAb,CAAf;AACA,UAAIC,OAAO,GAAGL,CAAC,CAACG,MAAD,CAAf;;AAEA,UAAGE,OAAO,CAACC,QAAR,CAAiB,MAAjB,CAAH,EAA6B;AACzBD,QAAAA,OAAO,CAACE,WAAR,CAAoB,MAApB;AACH,OAFD,MAEO;AACHF,QAAAA,OAAO,CAACG,QAAR,CAAiB,MAAjB;AACH;AACJ,KATD;AAUH;;AAED,WAASC,OAAT,GAAmB;AACfT,IAAAA,CAAC,CAAC,WAAD,CAAD,CAAeE,EAAf,CAAkB,OAAlB,EAA2B,YAAY;AACnCF,MAAAA,CAAC,CAAC,WAAD,CAAD,CAAeU,MAAf,GAAwBC,IAAxB,CAA6B,WAA7B,EAA0CJ,WAA1C,CAAsD,QAAtD,EADmC,CAEnC;;AACAP,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQQ,QAAR,CAAiB,QAAjB,EAHmC,CAInC;;AACA,UAAML,MAAM,GAAGH,CAAC,CAAC,IAAD,CAAD,CAAQI,IAAR,CAAa,gBAAb,CAAf,CALmC,CAMnC;;AACAJ,MAAAA,CAAC,CAAC,WAAD,CAAD,CAAeO,WAAf,CAA2B,OAA3B,EAAoCA,WAApC,CAAgD,QAAhD,EAPmC,CAQnC;;AACAP,MAAAA,CAAC,CAAC,cAAD,CAAD,CACKW,IADL,CACUR,MADV,EAEKK,QAFL,CAEc,MAFd,EAGKA,QAHL,CAGc,QAHd;AAIH,KAbD;AAcH,GA9BgB,CAgCjB;;;AACAT,EAAAA,QAAQ;AACRU,EAAAA,OAAO;AACV,C,CAED;;;AACA,SAASX,WAAT,GAAuB;AAEnB,WAASc,OAAT,GAAmB;AACf;AACA,QAAIC,QAAQ,GAAGb,CAAC,CAAC,6BAAD,CAAD,CAAiCW,IAAjC,CAAsC,OAAtC,EAA+CG,IAA/C,EAAf,CAFe,CAGf;;AACA,QAAIC,KAAK,GAAGf,CAAC,CAAC,uBAAD,CAAD,CAA2BW,IAA3B,CAAgC,IAAhC,EAAsCK,MAAlD;AACAH,IAAAA,QAAQ,GAAGA,QAAQ,CAACI,OAAT,CAAiB,UAAjB,EAA6BF,KAA7B,CAAX,CALe,CAMf;;AACAf,IAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2BkB,MAA3B,CAAkCL,QAAlC;AACH;;AAED,WAASM,0BAAT,GAAsC;AAClCnB,IAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8BoB,IAA9B,CAAmC,UAASC,IAAT,EAAe;AAC9C,UAAIC,GAAG,GAAGtB,CAAC,CAAC,IAAD,CAAX,CAD8C,CAE9C;;AACA,UAAIuB,QAAQ,GAAGC,UAAU,CAACF,GAAG,CAACX,IAAJ,CAAS,cAAT,EAAyBc,GAAzB,EAAD,CAAzB;AACA,UAAIC,gBAAgB,GAAGF,UAAU,CAACF,GAAG,CAACX,IAAJ,CAAS,yBAAT,EAAoCc,GAApC,EAAD,CAAjC;AACA,UAAIE,OAAO,GAAGH,UAAU,CAACF,GAAG,CAACX,IAAJ,CAAS,cAAT,EAAyBc,GAAzB,EAAD,CAAxB,CAL8C,CAM9C;;AACAF,MAAAA,QAAQ,GAAGK,KAAK,CAACL,QAAD,CAAL,GAAkB,CAAlB,GAAsBA,QAAjC;AACAG,MAAAA,gBAAgB,GAAGE,KAAK,CAACF,gBAAD,CAAL,GAA0B,CAA1B,GAA8BA,gBAAjD;AACAC,MAAAA,OAAO,GAAGC,KAAK,CAACD,OAAD,CAAL,GAAiB,CAAjB,GAAqBA,OAA/B,CAT8C,CAU9C;;AACA,UAAIE,gBAAgB,GAAGH,gBAAgB,IAAI,IAAKC,OAAO,GAAG,GAAnB,CAAvC;AACA,UAAIG,iBAAiB,GAAGJ,gBAAgB,GAAGH,QAA3C;AACA,UAAIQ,iBAAiB,GAAGF,gBAAgB,GAAGN,QAA3C,CAb8C,CAc9C;;AACAD,MAAAA,GAAG,CAACX,IAAJ,CAAS,gBAAT,EAA2Bc,GAA3B,CAA+BM,iBAA/B;AACH,KAhBD;AAiBH;;AAED,WAASC,iBAAT,GAA6B;AACzB;AACAb,IAAAA,0BAA0B,GAFD,CAGzB;AACH,GApCkB,CAsCnB;AAEA;;;AACAnB,EAAAA,CAAC,CAACN,QAAQ,CAACO,IAAV,CAAD,CAAiBC,EAAjB,CAAoB,OAApB,EAA6B,cAA7B,EAA6C,YAAW;AACpDU,IAAAA,OAAO,GAD6C,CAEpD;;AACAoB,IAAAA,iBAAiB;AACpB,GAJD,EAzCmB,CA+CnB;;AACAhC,EAAAA,CAAC,CAACN,QAAQ,CAACO,IAAV,CAAD,CAAiBC,EAAjB,CAAoB,OAApB,EAA6B,iBAA7B,EAAgD,UAAS+B,CAAT,EAAY;AACxD,QAAIC,IAAI,GAAGlC,CAAC,CAACiC,CAAC,CAAC9B,MAAH,CAAZ;AACA,QAAImB,GAAG,GAAGY,IAAI,CAACC,OAAL,CAAa,IAAb,CAAV,CAFwD,CAGxD;AACA;;AACAb,IAAAA,GAAG,CAACc,MAAJ;AACH,GAND,EAhDmB,CAwDnB;;AACApC,EAAAA,CAAC,CAACN,QAAQ,CAACO,IAAV,CAAD,CAAiBC,EAAjB,CAAoB,QAApB,EAA8B,cAA9B,EAA8C,UAAS+B,CAAT,EAAY;AACtDD,IAAAA,iBAAiB;AACpB,GAFD,EAzDmB,CA6DnB;;AACAhC,EAAAA,CAAC,CAACN,QAAQ,CAACO,IAAV,CAAD,CAAiBC,EAAjB,CAAoB,QAApB,EAA8B,cAA9B,EAA8C,UAAS+B,CAAT,EAAY;AACtDD,IAAAA,iBAAiB;AACpB,GAFD;AAGH","sourcesContent":["/*\r\n * Welcome to your app's main JavaScript file!\r\n *\r\n * We recommend including the built version of this JavaScript file\r\n * (and its CSS file) in your base layout (base.html.twig).\r\n */\r\n\r\n// import Datagird from \"./components/Datagrid\";\r\n// import Toolbar from \"./components/Toolbar\";\r\n\r\ndocument.addEventListener('DOMContentLoaded', (event) => {\r\n    //\r\n    bootstrap()\r\n    //\r\n    taxDocument();\r\n});\r\n\r\n/**\r\n * Bootstrap functions\r\n */\r\nfunction bootstrap() {\r\n    function datagrid() {\r\n        // Datagrid fix\r\n        $(document.body).on('click', \"[data-toggle='collapse']\", function() {\r\n            const target = $(this).attr('data-target');\r\n            var $target = $(target);\r\n\r\n            if($target.hasClass('show')) {\r\n                $target.removeClass('show');\r\n            } else {\r\n                $target.addClass('show');\r\n            }\r\n        });\r\n    }\r\n\r\n    function toolbar() {\r\n        $('.nav-link').on('click', function () {\r\n            $('.nav-link').parent().find('.nav-link').removeClass('active');\r\n            //\r\n            $(this).addClass('active');\r\n            //\r\n            const target = $(this).attr('data-bs-target');\r\n            //\r\n            $('.tab-pane').removeClass('.show').removeClass('active');\r\n            //\r\n            $('.tab-content')\r\n                .find(target)\r\n                .addClass('show')\r\n                .addClass('active');\r\n        });\r\n    }\r\n\r\n    // Init\r\n    datagrid();\r\n    toolbar();\r\n}\r\n\r\n// Tax document\r\nfunction taxDocument() {\r\n\r\n    function addItem() {\r\n        // Copy template\r\n        let template = $('#tax-document-item-template').find('tbody').html();\r\n        // Replace index\r\n        let index = $('.js-tax-document-rows').find('tr').length;\r\n        template = template.replace(/_index_/g, index);\r\n        //\r\n        $('.js-tax-document-rows').append(template);\r\n    }\r\n\r\n    function recalculateLineItemsTotals() {\r\n        $('.js-tax-document-rows tr').each(function(item) {\r\n            var $tr = $(this);\r\n            //\r\n            var quantity = parseFloat($tr.find('.js-quantity').val());\r\n            var unitPriceTaxExcl = parseFloat($tr.find('.js-unit-price-tax-excl').val());\r\n            var taxRate = parseFloat($tr.find('.js-tax-rate').val());\r\n            //\r\n            quantity = isNaN(quantity) ? 0 : quantity;\r\n            unitPriceTaxExcl = isNaN(unitPriceTaxExcl) ? 0 : unitPriceTaxExcl;\r\n            taxRate = isNaN(taxRate) ? 0 : taxRate;\r\n            //\r\n            var unitPriceTaxIncl = unitPriceTaxExcl * (1 + (taxRate / 100));\r\n            var totalPriceTaxExcl = unitPriceTaxExcl * quantity;\r\n            var totalPriceTaxIncl = unitPriceTaxIncl * quantity;\r\n            //\r\n            $tr.find('.js-item-total').val(totalPriceTaxIncl);\r\n        });\r\n    }\r\n\r\n    function recalculateTotals() {\r\n        // Line Items\r\n        recalculateLineItemsTotals();\r\n        // Recalculate totals\r\n    }\r\n\r\n    // ----------------------------------- Events ------------------------------------- \\\\\r\n\r\n    // Add item\r\n    $(document.body).on('click', '.js-add-item', function() {\r\n        addItem();\r\n        //\r\n        recalculateTotals();\r\n    })\r\n\r\n    // Remove item\r\n    $(document.body).on('click', '.js-remove-item', function(e) {\r\n        var $btn = $(e.target);\r\n        var $tr = $btn.parents('tr');\r\n        //\r\n        // Can delete?\r\n        $tr.remove();\r\n    });\r\n\r\n    // Change quantity\r\n    $(document.body).on('change', '.js-quantity', function(e) {\r\n        recalculateTotals();\r\n    })\r\n\r\n    // Change tax rate\r\n    $(document.body).on('change', '.js-tax-rate', function(e) {\r\n        recalculateTotals();\r\n    })\r\n}"],"file":"main.bf4def2b63.js"}